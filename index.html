<!DOCTYPE html>
<html>
<head>
	<title>Wendy's MomentFeed Code Test</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type='text/javascript'></script>
	<style>
		.blocks{
			width: 640px;
			border: 2px solid blue;
			/*float: left;*/
			margin: 15px auto;
		}
		.instAuthHide{
			color: gray;
		}
	</style>
</head>
<body onload="initialize()">
<!-- http://wendygwo.github.io/codeTestWendy/#access_token=261156197.7f7b1d5.9710e2fa84914f08b307504bbf0743cb -->

<div class='instAuth'>
	<a href='https://instagram.com/oauth/authorize/?client_id=7f7b1d50ce8f4ca28308d7322078d5d0&redirect_uri=http://wendygwo.github.io/codeTestWendy/&response_type=token'>Click to authorize Instagram</a>
</div>
<br>
<input type='button' value='Click here to fill with pictures from your feed' id='mainButton'>
<h1>Popular Pictures</h1>
<div class="popular">
</div>

<script>
	// $('instAuth').addClass('instAuthHide');
	function initialize()
	{
		var x = document.URL;
		console.log('The URL is: ' + x);
		var token_index = x.indexOf('access_token=');
		var access_token = x.slice(token_index+13, -1);
		console.log('The access token is: ' + access_token);
	}
	$('#mainButton').click(function(){
		console.log('Button clicked');
			$.ajax({
	      type: "GET",
	      dataType: "jsonp",
	      cache: false,
	      url: "https://api.instagram.com/v1/users/self/feed?access_token=261156197.7f7b1d5.9710e2fa84914f08b307504bbf0743cb",
	      success: function(data) {
	        // placing the images on the page
	        for (var i = 0; i < 6; i++) {
	          $(".popular").append("<div class='blocks'><a target='_blank' href='" + data.data[i].link + "'><img src='" + data.data[i].images.standard_resolution.url + "'></img></a></div>");
	    		}
	      }
	    });
	})
</script>

</body>
</html>